<!DOCTYPE html>
<html>
<head>
  <title>クイズアプリ</title>
  <style>
    /* 共通のスタイル */
    body {
      margin: 0;
      padding: 0;
      font-family: Arial, sans-serif;
      font-size: 18px;
    }

    .container {
      margin: 0 auto;
      padding: 20px;
      background-color: rgba(255, 255, 255, 0.8);
      border-radius: 10px;
    }

    h1 {
      text-align: center;
      margin-bottom: 20px;
    }

    .question {
      font-weight: bold;
      margin-bottom: 10px;
    }

    .choices {
      margin-bottom: 20px;
    }

    .choice {
      margin: 10px 0;
      padding: 10px;
      border: 1px solid #ccc;
      border-radius: 5px;
      cursor: pointer;
      transition: background-color 0.2s ease;
      width: 100%;
    }

    .choice:hover {
      background-color: #f1f1f1;
    }

    .correct-answer {
      color: green;
      animation: correct-animation 1s ease;
    }

    @keyframes correct-animation {
       0% {
        transform: scale(1);
      }
      50% {
        transform: scale(1.2);
      }
      100% {
        transform: scale(1);
      }
    }

    .wrong-answer {
      color: red;
    }

    .score {
      text-align: center;
      font-weight: bold;
      margin-bottom: 20px;
    }

    .end-message {
      text-align: center;
      font-weight: bold;
      font-size: 24px;
      margin-bottom: 20px;
    }

    /* 縦画面のスタイル */
    @media screen and (orientation: portrait) {
      .container {
        max-width: 100%; /* 画面幅に合わせて最大幅を設定 */
        padding: 10px;
      }

      .choice {
        width: 100%;
        max-width: 200px;
        margin-left: auto;
        margin-right: auto;
      }
    }
  </style>
</head>
<body>
   <div class="container">
    <h1>クイズアプリ</h1>
    <div class="question" id="question"></div>
    <div class="choices" id="choices"></div>
    <div class="score" id="score"></div>
    <div class="end-message" id="end-message"></div>
    <audio id="bg-music" src="bg-music.mp3" loop></audio>
    <button id="start-button" onclick="startQuiz()">クイズを開始</button>
    <button id="answer-button" onclick="checkAnswer()" style="display: none;">回答する</button>
    <button id="next-button" onclick="nextQuestion()" style="display: none;">次の問題</button>
    <button id="restart-button" onclick="restartQuiz()" style="display: none;">もう一度プレイ</button>
  </div>

  <script>
    const questions = [
      {
        question: "質問1",
        choices: ["選択肢1", "選択肢2", "選択肢3", "選択肢4"],
        correctAnswer: 0
      },
      {
        question: "質問2",
        choices: ["選択肢1", "選択肢2", "選択肢3", "選択肢4"],
        correctAnswer: 1
      },
      // 他の質問を追加する
    ];

    let currentQuestionIndex = 0;
    let score = 0;

    const questionElement = document.getElementById("question");
    const choicesElement = document.getElementById("choices");
    const scoreElement = document.getElementById("score");
    const endMessageElement = document.getElementById("end-message");
    const startButton = document.getElementById("start-button");
    const answerButton = document.getElementById("answer-button");
    const nextButton = document.getElementById("next-button");
    const restartButton = document.getElementById("restart-button");

    // クイズを開始する
    function startQuiz() {
      startButton.style.display = "none";
      renderQuestion();
      answerButton.style.display = "block";
    }

    // 問題を表示する
    function renderQuestion() {
      const currentQuestion = questions[currentQuestionIndex];
      questionElement.textContent = currentQuestion.question;

      choicesElement.innerHTML = "";
      currentQuestion.choices.forEach((choice, index) => {
        const choiceButton = document.createElement("button");
        choiceButton.textContent = choice;
        choiceButton.classList.add("choice");
        choiceButton.setAttribute("onclick", `checkAnswer(${index})`);
        choicesElement.appendChild(choiceButton);
      });
    }

    // 回答をチェックする
    function checkAnswer(choiceIndex) {
      const currentQuestion = questions[currentQuestionIndex];
      if (choiceIndex === currentQuestion.correctAnswer) {
        score++;
        choicesElement.childNodes[choiceIndex].classList.add("correct-answer");
      } else {
        choicesElement.childNodes[choiceIndex].classList.add("wrong-answer");
      }

      disableChoices();
      answerButton.style.display = "none";
      nextButton.style.display = "block";

      if (currentQuestionIndex === questions.length - 1) {
        showEndMessage();
      }
    }

    // 選択肢のボタンを無効化する
    function disableChoices() {
      choicesElement.childNodes.forEach((choiceButton) => {
        choiceButton.setAttribute("disabled", true);
      });
    }

    // 次の問題に進む
    function nextQuestion() {
      currentQuestionIndex++;
      resetChoices();
      renderQuestion();
      nextButton.style.display = "none";
      answerButton.style.display = "block";
    }

    // 選択肢のスタイルをリセットする
    function resetChoices() {
      choicesElement.childNodes.forEach((choiceButton) => {
        choiceButton.classList.remove("correct-answer");
        choiceButton.classList.remove("wrong-answer");
        choiceButton.removeAttribute("disabled");
      });
    }

    // 終了メッセージを表示する
    function showEndMessage() {
      scoreElement.textContent = `スコア: ${score} / ${questions.length}`;
      endMessageElement.textContent = "クイズ終了";
      nextButton.style.display = "none";
      restartButton.style.display = "block";
    }

    // クイズをリスタートする
    function restartQuiz() {
      currentQuestionIndex = 0;
      score = 0;
      resetChoices();
      renderQuestion();
      scoreElement.textContent = "";
      endMessageElement.textContent = "";
      restartButton.style.display = "none";
      answerButton.style.display = "block";
    }
  </script>


</body>
</html>
